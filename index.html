<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Reproducibility Package by Gemarodri</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Reproducibility Package (Work in Progress)</h1>
      <h2 class="project-tagline"> At this web page, all the data used in our study is available as well as a detailed guide about the methodology and the scripts used through the research. Our reseach involves the study of how fixed bugs have been inserted into the source code, focusing the main effort in a manual validation that answers whether a previous change in the code is the cause of the bug or not.</h2>
      <a href="https://github.com/Gemarodri/Reprodu-Package/tree/gh-pages
" class="btn">View on GitHub</a>
      <a href="https://github.com/Gemarodri/Reprodu-Package/archive/gh-pages.zip" class="btn">Download .zip</a>
      <a href="https://github.com/Gemarodri/Reprodu-Package
/tarball/gh-pages" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
     <h3>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a> Data analyzed.</h3>
<p>We have used tickets from two different projects, the first one was Nova written in Python, and the second one was ElasticSearch written in Java. We took a simple random sample of each project; 125 tickets from Nova, of those only 60 was real bug report with all the data related with the code review and version control system well documented. The sample of ElasticSearch was 60 due to ElasticSearch uses a strong labeled in its tickets we can be sure that the tickets labeled as bug report was real bug report, and because of the goals of the research was evaluate the main question in two different projects written in different programming languajes. </p>
<p>In the next link you can find a json file with the identifier of the tickets analyzed in each proyect. If you can see the information of each ticket you must know that Nova uses <a href="https://bugs.launchpad.net/nova/+bugs">Launchpad</a> whereas ElasticSearch uses <a href="https://github.com/elastic/elasticsearch/issues/">Github</a>.</p>

 <ul>
  <li><a href="https://github.com/Gemarodri/Reprodu-Package/blob/gh-pages/Nova.json">Nova</li>
  <li><a href="https://github.com/Gemarodri/Reprodu-Package/blob/gh-pages/ElasticSearch.json">ElasticSearch</li>
</ul> 
      <h3>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a> How to analize a bug report.</h3>
<p>We explain how we have analized the bug reports in Launchpad and Github, describing the criteria that we have followed in some situations. </p>
<h3>Nova and ElasticSearch</h3>
<p> We start supposing that we already have all the identifiers of the tickets. So, we can go to the ulr of Launchpad and Github to see the description of the bug report.
  <ol>
    <li>In the bug report usualy there is a link to the code review system (Gerrit) in Nova, or a link to the pull request closed in ElasticSearch. In this page we can find the information related with the problem and the discussion of the possible solution and get more context about the problem.
    Some Bug reports doesn't have this link because in the meanwhile the bug was fixed in other bug report. So,
      <p> * Should we discard this Bugs report from the study?. We only discarded this tickets if we cannot find the fix commit in their comments, because sometimes the ticket didn't provide these link to the code review system (very inusual) or to the pull request (more usual) but it provided the fix commit link</p>
      <p>Also, some bug reports have two different links with two different fix commits, so we took the last one done in master branch, usually these fix commit are not so different from each other.<p></li>
    <li>In the Gerrit or pull request web page you can find information about the change in the code proposed and some comments from the reviewers, also, you can find the link to the commit that merge the fix commit into the source code. Sometimes in ElasticSearch you can find the link to the fix commit in some of the comments done in the ticket</li>
    <li>In the web page of the fix commit, we find the parent of the each commit and the files involved. We extract this parent commit to see the last commit that touch this/these lines in all the files involved excluding test files. We notice that the files are test files because in the path we can see the ‘test’ word.

      <p>Also, we can find the parents of a commit in the command line; This command will give you the parents of the current commit. The parents are in the first line. See example</p>
        <pre>
          git log --parents -1 commitId
        </pre>  

    The parent of the commit ffee1b34448333a5406d766feef85cea4f4be1dc is a4e15e329f9adbcfe72fbcd6acb94f0743ad02f8. See line starting with “commit” below. If a commit has more than 1 parent (a merge) the order of the commits matters. The first one is the branch where the merge is done, and the rest of the commits are the merged commits in the order specified in the command

      <pre>
        git log --parents -1 ffee1b34448333a5406d766feef85cea4f4be1dc
        commit ffee1b34448333a5406d766feef85cea4f4be1dc a4e15e329f9adbcfe72fbcd6acb94f0743ad02f8
        Author: jichenjc 
        Date:   Sat Apr 23 01:56:55 2016 +0800

        Complet Method Verification of availability-zone
      </pre>

    <p>Alternatively you can do the following command, and the parents are the commit ids after the commit id:</p>

      <pre>
        git log --no-abbrev --parents --oneline -1 ffee1b34448333a5406d766feef85cea4f4be1dc
        ffee1b34448333a5406d766feef85cea4f4be1dc a4e15e329f9adbcfe72fbcd6acb94f0743ad02f8 \\
        Complet Method Verification of availability-zone
      </pre>  
    </li>
  </ol>
  <p> At this moment we have all the information that we need in our empirical analysis, it's based on the stududy of the source code trying  to locate the origin of the bug. For this, we carried out two different methods, the first one is focused at line level whereas the other is focused on token level. The output is that sometimes we will find a commit that caused the bug but other times we don't. Also, this commit that caused the bug could be the last one that touch the line involved in the fix commit or could be other antecesor commit that we are ables/unables to locate. So, now we are going to describe the steps to locate the origin of the bug using the two methods.</p>

<h3>Line level</h3>
  <ol>
    <li> For each previous commit, find his parent and display the same information that before in the web, to can understand the moment in which this/these line/s was/were inserted and to be sure that the previous commit was who inserted these lines, avoiding that way the lines copied from other commits.
      <p>How we can know that the previous commit was clean in the moment in which it was inserted into the source code?</p>
        <ul>  
          <li>Incompatibility between versions or Hardware and Software</li>
          <li>Optimization of the code</li>
          <li>When the cahnge doesn’t have any relation with the bug reported</li>
          <li>Changes in the LOGs to clarify the message</li>
        </ul>
      <p>How we can know that the previous commit was buggy in the moment in which it was inserted into the source code?</p>
        <ul>
          <li>If the previous commit is mentioned in the description as the reason of the bug</li>
          <li>When we are not sure 100% if the previous commit was clean at the moment in which the lines were inserted.</li>
          <li>Obvious cases when the values of the variables is not the correct, wrong sentences...</li></li>
        </ul>
    <li>Removing the false positives previous commits. When we are analyzing the previous commit we have to realise whether the date in which this commit was committed was done after the date in which the bug report was reported, and in that case discard the previous commit.</li>
  </ol>
    

<p>At the end, we have semi-automatized this methodology. In ElasticSearch building a python script 'elastic.py' which interact with the research asking for the bug ID, the fix commit and the previous commits. The script opens many web pages where you can find all the information and decide if the previous commit inserted a clen lines or a buggy lines in the moment in which they was merged into the source code. Also, this script save the information in a json file. In Nova using the web tool <a href="bugtracking.libresoft.es">BugTracking</a> which help us with this anlaisis in Openstack projects. </p>
<p style="font-family:sans-serif;" >What information we need to save?
  <ul>
    <li>ID fix commit</li>
    <li>ID commit parent</li>
    <li>ID commit previous</li>
    <li>ID Bug report</li>
    <li>Files involved</li>
    <li>The number/numbers of previous commit that caused the bug</li>
    <li>Comments from the researcher with a description of the previous commits involved.</li></p>
  </ul></p>
<p style="font-family:sans-serif;">What should we do in the next situations?</p>
<p>We found some situations in which we were not sure how to handle them, so it was easier defined some rules to follow in these situations.</p>
  <p> 1. Only added lines was inserted in the bug fix.
    <ul>
      <li>When there is only one previous commit above and below the new lines</li><p>See the context and understand if the fix commit added these lines because the previous commit has forgotted them or not</p>
      <li>When there is more than one previous commit in the lines below and above the new lines inserted.</li><p>See the context and understand if the fix commit added these lines because some of the previous commit has forgotted them or not</p>
    </ul></p>
  <p>2.When there are more than one previous commit tha caused the bug.
    <ul>
      <li>Have some of them more responsability than the others?</li><p>No, all of them has the same responsability. But we know that in some cases this is not real.</p>
    </ul>
  </p>
</p>

<h3>
<a id="designer-templates" class="anchor" href="#designer-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Results</h3>
<ul>
  <li><a href="https://github.com/Gemarodri/Reprodu-Package/blob/gh-pages/Results/elasticSearch/analysis(C)-json"> ElasticSearch:</a></li> Here you can find a reporsitory with all the results of each ticket analyzed in ElasticSearch. The results of each ticket are in json format.  

   
  <li><a href="https://github.com/Gemarodri/Reprodu-Package/blob/gh-pages/Results/elasticSearch/analysis(C)-json">Nova:</a></li> Here you can find a reporsitory with all the results of each ticket analyzed in nova. The results of each ticket are in json format.  

</ul> 

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p> Gregorio Robles (<a href="https://github.com/gregoriorobles" class="user-mention">@grex</a>), Jesus M. Gonzalez-Barahora (<a href="https://github.com/jgbarah" class="user-mention">@jgbarah</a>), and Gema Rodriguez (<a href="https://github.com/gemarodri" class="user-mention">@gemarodri</a>).</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Gemarodri/Reprodu-Package">Reproducibility Package</a> is maintained by <a href="https://github.com/Gemarodri">Gemarodri</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
